<div #addElement class="grid grid-cols-1 pb-8 gap-8 mx-5 md:grid-cols-1 md:mx-20 lg:grid-cols-2 lg:mx-20 xl:grid-cols-2 xl:mx-20">
    <!-- @for (crane of cranes; track crane.id){
        <p-card class="mt-2 lg:mt-10 shadow-xl" [header]="crane.name" [subheader]="formatPrice(crane.price)">
            <ng-template pTemplate="header">
                <img alt="Card" [src]="crane.imgUrl"/>
            </ng-template>
            <p class="block text-sm">Maximális kinyúlás / markoló nyitva: {{crane.reachMax}} / {{crane.reachWithGrabOpen}} m</p>
            <p class="block text-sm">Nettó emelő nyomaték: {{crane.liftingTorqueNet}} kNm</p>
            <p class="block text-sm">Emelőképesség 4 m-es markolóval: {{crane.liftingCapacity}} kg</p>
            <ng-template pTemplate="footer">
                <div class="grid grid-cols-1 mb-4">
                    
                    <div class="col-start-1 col-end-3">
                        <p-button (onClick)="navigateToMachine(crane.id)" label="További információ a termékről" class="bg-slate-300 rounded-lg p-2 mx-2"></p-button>

                    </div>
                </div>
                <div class="grid grid-cols-1 mt-4">
                    <div class="col-start-1 col-end-3">

                        <p-button (onClick)="addToCalculator(crane)" label="Kalkulál" class="bg-[#8ac73c] rounded-lg p-2 mx-2"></p-button>
                    </div>
                   
                </div>
                
                
            </ng-template>
        </p-card>
    } 
    @empty {
        <p>There are no cranes.</p>
    }
    </div> -->
    <form [formGroup]="formGroup">
    <div #configElement class="flex align-middle justify-center my-10">
      
        <div class="justify-center w-9/12">
            <div class="justify-content-center my-4 py-4">
              <span>Vezértömb</span>
              <p-listbox #controlBlockListBox (onChange)="handleControlBlockChange($event)" [options]="controlBlocks" formControlName="selectedControlBlock" optionLabel="name"></p-listbox>
              
            
            </div>
        
            <div class="justify-content-center my-4 py-4">
                <span>Rotátor + közbetét</span>
                <p-listbox #rotatorListBox (onChange)="handleRotatorChange($event)" [options]="rotators" formControlName="selectedRotator" optionLabel="name"></p-listbox>
            </div>
    
            <div class="justify-content-center my-4 py-4">
                <span>Rotátorfék</span>
                <p-listbox #rotatorBrakeListBox (onChange)="handleRotatorBrakeChange($event)" [options]="rotatorBrakes" formControlName="selectedRotatorBrake" optionLabel="name"></p-listbox>
            </div>
    
            <div class="flex gap-2 my-4">
                <p-checkbox #backrestCheckBox (onChange)="handleChange(configItems['háttámla'].name, configItems['háttámla'].price, $event)" formControlName="backRestSelected" value="selected"  inputId="háttámla"></p-checkbox>
                <label for="háttámla">{{configItems['háttámla'].name}} {{ formatPrice(configItems['háttámla'].price)}}</label>
            </div>
    
            <div class="flex gap-2 my-4">
                <p-checkbox #oilCoolerCheckBox (onChange)="handleChange(configItems['olajhűtő'].name, configItems['olajhűtő'].price, $event)"  formControlName="oilCoolerSelected" value="selected" inputId="olajhűtő"></p-checkbox>
                <label for="olajhűtő">{{configItems['olajhűtő'].name}} {{ formatPrice(configItems['olajhűtő'].price)}}</label>
            </div>
    
            <div class="flex gap-2 my-4">
                <p-checkbox #ledCheckBox (onChange)="handleChange(configItems['ledMunkalámpák'].name, configItems['ledMunkalámpák'].price, $event)"  formControlName="ledSelected" value="selected" inputId="ledMunkalámpák"></p-checkbox>
                <label for="ledMunkalámpák">{{configItems['ledMunkalámpák'].name}} {{ formatPrice(configItems['ledMunkalámpák'].price)}}</label>
            </div>
    
            <div class="flex gap-2 my-4">
                <p-checkbox #workingHoursCheckBox (onChange)="handleChange(configItems['munkaÓraSzámláló'].name, configItems['munkaÓraSzámláló'].price, $event)"  formControlName="workingHoursSelected" value="selected" inputId="munkaÓraSzámláló"></p-checkbox>
                <label for="munkaÓraSzámláló">{{configItems['munkaÓraSzámláló'].name}} {{ formatPrice(configItems['munkaÓraSzámláló'].price)}}</label>
            </div>
        </div>
      
    </div>
    
    <div *ngIf="equipmentSelected" class="grid grid-cols-8 pb-20">
        <div class="col-end-4 col-span-2 mb-10">
            <button *ngIf="equipmentSelected" class="rounded-md p-2 bg-red-500" (click)="delete()">Törlés</button>
            <div class="flex gap-1">
                <p class="font-bold text-2xl pt-1">Kalkulált ár:</p>
                <p class="font-bold text-2xl pt-1">{{formatPrice(calculatorService.price$ | async)}}</p>   
            </div>      
        </div>
    </div>
    

    <section class="relative block mt-40 py-24 lg:pt-0 lg:mt-48 bg-slate-200">
        <div class="container mx-auto px-4">
          <div class="flex flex-wrap justify-center lg:-mt-64 -mt-48">
            <div class="w-full lg:w-12/12 px-10">
              <div
                class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-gray-300"
              >
                <div class="flex-auto p-5 lg:p-10">
                  <h4 class="text-2xl font-semibold">Kérdése van?</h4>
                  <p class="leading-relaxed mt-1 mb-4 text-gray-600">
                    Tegye fel nekünk üzenetben!
                  </p>

                  <!-- NAME -->
                  <div class="relative w-full mb-3 mt-8">
                    <div class="flex gap-4">
                      <label class="block uppercase text-gray-700 text-xs font-bold mb-2" for="name">Név<span class="text-red-500">*</span></label>
                      @if (submitted && f['name'].errors) {  
                        @if (f['name'].errors['required']) {
                          <p class="block text-red-500 text-xs mb-2">Kérem adja meg a nevét!</p>
                        }
                      }
                    </div> 
                    <input
                      type="text"
                      name="name"
                      formControlName="name"
                      class="border-0 px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full"
                      placeholder="Név"
                      style="transition: all 0.15s ease 0s;"
                    />                             
                  </div>

                  <!-- EMAIL -->
                  <div class="relative w-full mb-3">
                    <div class="flex gap-4">
                      <label class="block uppercase text-gray-700 text-xs font-bold mb-2" for="email">Email<span class="text-red-500">*</span></label>
                      @if (submitted && f['email'].errors) {  
                        @if (f['email'].errors['required']) {
                          <p class="block text-red-500 text-xs mb-2">Kérem adja meg az e-mail címét!</p>
                        }
                      }
                    </div>
                    <input
                      type="email"
                      name="email"
                      formControlName="email"
                      class="border-0 px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full"
                      placeholder="Email"
                      style="transition: all 0.15s ease 0s;"
                    />
                  </div>

                  <!-- MESSAGE -->
                  <div class="relative w-full mb-3">
                    <div class="flex gap-4">
                      <label class="block uppercase text-gray-700 text-xs font-bold mb-2" for="message">Üzenet<span class="text-red-500">*</span></label>
                      @if (submitted && f['message'].errors) {  
                        @if (f['message'].errors['required']) {
                          <p class="block text-red-500 text-xs mb-2">Kérem gépeljen az üzenet mezőbe!</p>
                        }
                      }
                    </div>
                    <textarea
                      name="message"
                      formControlName="message"
                      rows="4"
                      cols="80"
                      class="border-0 px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full"
                      placeholder="Kérem fogalmazza meg a kérdését..."
                    ></textarea>
                  </div>
                  <div class="text-center mt-6">
                    <button
                    (click)="onSubmit()"
                      class="bg-[#8ac73c] text-white active:bg-gray-700 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1"
                      type="button"
                      style="transition: all 0.15s ease 0s;"
                    >
                      Küldés
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </form>